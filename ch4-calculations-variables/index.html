<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Page Title</title>
  <link rel="stylesheet" href="../css/main.css"/>
</head>
<body class="line-numbers">
  <aside id="toc-column"></aside>
  <aside id="agenda" include="../agenda.html"></aside>
  <div id="page">
    <main>

  <h1>Chapter 4: calculations and storing results in <i>variables</i></h1>

  <youtube ytid="gvDQinqZhIc"></youtube>

  <h3 class="assignment summary">4.1: summary and questions</h3>
  <p>You haven't forgotten to make note, have you?</p>
  <section class="assignment">
    <answer  buttontext="mail your summary">4.1.a: Make a list with <i>3 to 5 bulletpoints</i> with the most important or interesting things in the video:</answer>
  </section>
  <section class="assignment">
      <answer noslider buttontext="mail your word list">4.1.b: Which words or concepts would you like us to explain during class?</answer>
  </section>

    <h3 class="assignment questions">4.2: lingo</h3>
      <p>Variables can also have pieces of text as their value. Here's a code snippet that uses variables with text values:</p>
      <script type="text/plain" class="language-javascript">
        var pasta = "Spagetti"
        var sauce = "Bolognese"
        var cheese
        cheese = "Parmesan"
        sauce = "Carbonara"
      </script>
      <section class="assignment">
        <h4>4.2.a: in the code above...</h4>
        <ol type=a>
          <li>...which lines have <i>variable assignments</i>?</li>
          <li>...which lines have <i>variable declarations</i>?</li>
          <li>...what are the <i>names of the variables</i>?</li>
        </ol>
        <answer noslider buttontext="mail your explanations"></answer>
      </section>
      <section class="assignment">
        <h4>4.2.b: how do the values change?</h4>
        <ul>
          <li>Copy-paste the above code into a new text file, </li>
          <li>add a comment at the end of every line,
          <li>in each comment, write the value of all the variables at that point in the execution of the program.</li>
        </ul>
        <answer buttontext="mail your commented code snippet"></answer>
        <section class="assignment">
          <h4>4.2.c: to quote or not to quote</h4>
          <p>Notice how, in the code snippet, text values have quotes around them: "Spagetti", "Carbonara", etc. These quotes are needed to prevent confusion.</p>
          <ol type=a>
            <li>If the value "Spagetti" did not have any quotes around it, how would JavaScript misunderstand it? With what kind of thing would JavaScript confuse it?</li>
            <li>What error message is shown in the console when you try the code snippet in the browser <i>without the quotes around "Spagetti"</i> (first place the code into an HTML-file, see <a href="../ch3-interactivity-functions/index.html#html-template">the template</a>).</li>
            <li>Can you think of another reason why it's useful to have text values be surrounded by quotes?</li>
          </ol>
          <answer buttontext="mail your answers"></answer>
        </section>
        </section>
<section class="assignment">
      <h3 class="assignment questions">4.3: an appropriate date</h3>
      <script type="text/plain" class="language-javascript">
        var ageSteven = 20
        var ageJanice = 30
        var janiceShouldDateAbove = ageJanice / 2 + 7
        var stevenShouldDateBelow = ageSteven - 7 * 2
        alert( "Janice should date people older than: " + janiceShouldDateAbove )
        alert( "Steven should date people younger than: " + stevenShouldDateBelow )

      </script>
      <p>According to the <a href="http://www.onehalfplusseven.com/home/about-the-half-your-age-plus-seven-rule" >one half plus seven rule</a>, it is approriate to date someone who is older than your age devided by two, plus seven. In the code, this rule is correctly demonstrated for Janice.</p>
      <p>Steven likes older women. 
        <ol type=a>
          <li>How old can Steven's dates be before they're breaking the rule?</li>
          <li>The formula on line 4 doesn't seem to work. Why is this?</li>
          <li>Try to fix Steven's formula on line 4, and send in the code for the fixed program.</li>
        </ol>
      <answer buttontext="mail your answers and your fix"></answer>
  </section>
  <br><br>
  <div class="theory">    
    <h3>expressions</h3>
    <script type="text/plain" class="language-javascript" data-line=3>
      var brand = "BMW"
      var type = "Isetta 300"
      var carName = brand + " " + type
      alert( carName )
    </script>
    <p><i>(that's <a href="https://www.inexhibit.com/case-studies/the-history-of-the-iso-bmw-isetta-the-worlds-first-microcar/">this magnificent vehicle</a>)</i></p>
    <p>Calculations can also be done with pieces of text. Textual data in programs are called <b>strings</b>. The code above creates two variables that have strings ("BMW" and "Isetta 300") as their value. Then, on the highlighted line, it creates a new string by combining those values, with a string containing a single space inbetween. Although the code uses the + symbol, it's not an addition, and we call this operation a <i>string concatenation</i>.</p>
    <p>It is a bit of a stretch to call string concatenations <i>calculations</i>. The better term any piece of code that creates a new value (text, number or other kinds) is <b><i>expression</i></b>.</p> 
    <p>An expression in a variable assignment is everything to the right of the "=" sign. In previous examples, we also used expressions between the parentheses of a function call.  An expression always results in a single value that can be stored in a variable, or used as inputs to a function call like <code>alert("BMW" + " " + "Isetta 300")</code> or <code>console.log(17/4 + 8))</code>.</p>
    
    <h4>mixing text and numeric expressions</h4>
    <p>It is very common in programs to have expressions that mix string concatenations with numeric calculations. Here's an example:</p>
    <script type="text/plain" class="language-javascript">
      var message = "The movie 'The Irishman' is " + ( 3 * 60 + 29 ) + " minutes long."
    </script>
    <p>When you mix text and numeric operations, use parenthesis, i.e. ( and ), to avoid confusion (between + for adding numbers and + for concatenating text).</p>
    </div>
      <section class="assignment">
        <h3>4.4: calculations and strings</h3>
      <p>Take the following code snippet:</p>
      <script type="text/plain" class="language-javascript">
        var lecturer = "Robert"
        var lecturer2 = "Jille"
        var votesForLecturer1 = 29
        var votesForLecturer2 = 30
      </script>
      <p>Add a fifth line that:</p>
      <ul>
        <li>Uses the variables above in single expression</li>
        <li>to create the value "Jille is the favourite lecturer after 59 votes were counted. Robert lost by 1 vote.",</li>
        <li>and uses result as the input of an alert.</li>
      </ul>
      
      <section class="theory">
      <p>Tip: Not all quotation marks play well with code. Note the difference between: single quotes (') , double quotes (") and curly quotes (“).  </p>
      <script type="text/plain" class="language-javascript">
        var a = "This is a string"
        var b = 'In JavaScript this is also a correct string. In arduino it means something different'
        var c = "This is not a string because it ends with a different quote.'
        var d = “This is not a string; it is very easy to accidently introduce these curly quotationmarks when copying code from word, the web or email.”
      </script>
    </section> 
      <answer noslider buttontext="mail your expression"></answer>
  </section>
<br><br><br>
<youtube ytid="9y7-PCjdyj4"></youtube>
<section class="assignment">
      <h3 class="assignment questions">4.5: Photoshop</h3>
<script type="text/plain" class="language-markup" data-line="53-60">
  <html>
<head>
  <meta charset="UTF-8">
  <title>Safari with Jille</title>
  <style>
    body {
      background-color: khaki;
      padding: 40px;
    }
    #product1, #product2, #shoppingCart {
      margin: 40px;
      padding: 40px;
      background-color: black;
      color: khaki;
      float: left;
    }
    #photo1, #photo2 {
      width: 300px;
    }
    #buyButton1, #buyButton2 {
      float: right;
      padding: 4px;
    }
    #shoppingCart {
      background-color: darkkhaki;
      color: black;
    }
    #orderLine1, #orderLine2, #totalLine {
      text-align: right;
    }
  </style>
</head>
<body>

  <h1 id="headline">Jille's Photo Shop</h1>

  <div id="product1">
    <img id="photo1" src="sunbird.jpg"/>
    <p id="caption1">Sunbird: €200 <button id="buyButton1">Buy photo</button><p>
  </div>
  <div id="product2">
    <img id="photo2" src="giraffe.jpg"/>
    <p id="caption2">Giraffe: €5000 <button id="buyButton2">Buy photo</button><p>
  </div> 
  <div id="shoppingCart">
    <h3>Your order:</h3>
    <p id="orderLine1">
      0 * sunbird = 0 euro
    </p>
    <p id="orderLine2">
      0 * giraffe = 0 euro
    </p>
    <p id="discountLine">
      Discount: 
      <select id="discountSelect">
        <option value=0>none</option>
        <option value=10>a bit</option>
        <option value=50>a lot</option>
      </select>
    </p>
    <hr>
    <p id="totalLine">
      total = 0 euro
    </p>
  </div>

</body>
<script>

var birdsBought = 0
var giraffesBought = 0

function updateShoppingCard(){
  document.getElementById("orderLine1").innerHTML = birdsBought + " * sunbird = " + birdsBought * 200 + " euro"
  document.getElementById("orderLine2").innerHTML = giraffesBought + " * giraffe = " + giraffesBought * 5000 + " euro"
}

function buyBirdPhoto() {
  birdsBought = birdsBought + 1
  updateShoppingCard()
}
function buyGiraffePhoto() {
  giraffesBought = giraffesBought + 1
  updateShoppingCard()
}

document.getElementById("buyButton1").onclick = buyBirdPhoto
document.getElementById("buyButton2").onclick = buyGiraffePhoto
&lt;/script>
</html>
</script>
<p>This is the code from the video with one addition: the highlighted section creates a selectbox that allows a user to select the amount of discount he things he should get on his purchase.</p>
<ul>
  <li>Using the console, experiment with the selectbox. How can you read the selected value with a JavaScript expression?</li>
  <li>Everytime a new picture is bought, the totalLine should be updated to the appropriate amount, taking into account the number of giraffe pictures bought, the number of bird pictures bought as well as the selected discount.</li>
</ul>
<answer noslider buttontext="mail your code"></answer>
</section>


<section class="assignment">
      <h3 class="assignment questions">4.6: variables in Arduino</h3>
      <script type="text/plain" class="language-arduino">
int outerCounter = 0;

void setup() {
  Serial.begin(9600);
}

void loop() {
  int innerCounter = 0;

  Serial.print("Outer Counter: ");
  Serial.println(outerCounter);
  Serial.print("Inner Counter: ");
  Serial.println(innerCounter);

  innerCounter = innerCounter + 1;
  outerCounter = outerCounter + 1;

  Serial.print("Outer Counter: ");
  Serial.println(outerCounter);
  Serial.print("Inner Counter: ");
  Serial.println(innerCounter);

  innerCounter = innerCounter + 1;
  outerCounter = outerCounter + 1;

  Serial.print("Outer Counter: ");
  Serial.println(outerCounter);
  Serial.print("Inner Counter: ");
  Serial.println(innerCounter);

  innerCounter = innerCounter + 1;
  outerCounter = outerCounter + 1;
  delay(300);
}
      </script>
      <p>
        In Arduino, the "int" keyword is used to declare a variable that can only contain a whole number (int is short for integer), see lines 1 and 8.
      </p>
      <p>
        Run the code on your arduino. 
        <ol type=a>
          <li>What is the difference in the behaviours of the innerCounter and the outerCounter variables?</li>
          <li>What do you have to change to make the innerCounter behave the same way that outerCounter does?</li>
          <li>Can you think of reasons why it is sometimes useful to have variables that behave the way <i>outerCounter</i> does?</li>
          <li>Can you think of reasons why it is sometimes useful to have variables that behave the way <i>innerCounter</i> does?</li>
        </ol> 
      </p>
      <answer noslider buttontext="mail your answers"></answer>
  </section>

<section class="assignment">
      <h3 class="assignment questions">4.7: magnet detector</h3>

      <p>The HAL sensors from AliExpress can be flakey. On some breadboards they will give a value of around 600 when no magnet is near. On other boards, the no-magnet value is close to 500 or even lower. When a magnet is held close to the sensor, the value may go up, or it may go down.</p>
      <p>We would like an audible magnet detector that will work on different breadboards. So, how do you know, when you read a value of e.g. 600, if there's a magnet coming near the sensor? One trick is to <i>calibrate</i> your program: measure the no-magnet value when to program starts (assuming the magnet is not close when the program starts). Then, to see if a magnet is getting near, you look at the <i>difference</i> between the values you read from the sensor, and the no-magnet value. When these differences become larger, you know a magnet is approaching, regardless of the exact no-magnet value of the sensor on the breadboard.</p>

      <script type="text/plain" class="language-arduino">
#include "s4d_breadboard.h"
int initialMagnetValue;
 
void setup() {
  initializeBreadboard();
  // 1. Calibrate our magnet detector by assigning the no-magnet value to 
  //    the "initialMagnetValue" variable in the setup.
}

void loop() {
  // 2. Make a new variable that has the current magnet reading as a value.
  // 3. Make a new variable that calculates the difference between the 
  //    control value and the current value. Use the built-in abs() function 
  //    to make the difference-value always be positive. abs(-100) is 100, and
  //    abs(100) is 100 too.
  // 4. Use Arduino's built-in tone(pin, frequency) function to make sound 
  //    corresponding with the proximity of a magnet. Maybe you need to multiply
  //    the difference variable by a factor of 6 or 8 to make the detector usable.
}
      </script>
      
        <p>Use the plan in code above to create a magnetdetector in arduino. You're going to need two functions that are built-in to the Arduino language:</p>
        <ul>
          <li><code>tone(BUZZER, 1000); </code> makes a tone at 1000 hertz.</li>
          <li><code>abs(number)</code> makes the <i>absolute</i> value from an input. This means abs(-2) is the same as abs(2). If you don't understand where you can use this, don't worry. You can still get a sort of ok solution without it.</li>
        </ul>
        <p>(More built-in functions are documented at <a href="https://www.arduino.cc/reference/en/">the Arduino Reference</a>)</p>        
      <answer noslider buttontext="Mail your explanation"></answer>
  </section>
    </main>
  </div>
<script src='../js/chapters.js'></script>
</body>
</html>